 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Forum | EduConnect</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1e40af;
      --primary-light: #93c5fd;
      --secondary: #06b6d4;
      --dark: #1e293b;
      --light: #f8fafc;
      --gray: #94a3b8;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
    }
    
    /* Navigation Bar - Matches Homepage */
    .navbar {
      background-color: var(--dark);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .nav-logo {
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .nav-logo i {
      color: var(--secondary);
    }
    
    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
    }
    
    .nav-links li a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      padding: 0.5rem 0;
      position: relative;
    }
    
    .nav-links li a:hover {
      color: var(--secondary);
    }
    
    .nav-links li a.active {
      color: var(--secondary);
    }
    
    .nav-links li a.active::after,
    .nav-links li a:hover::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: var(--secondary);
    }
    
    /* Hero Section - Matches Homepage */
    .hero-section {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      text-align: center;
      padding: 5rem 2rem;
      position: relative;
      overflow: hidden;
    }
    
    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgZmlsbD0idXJsKCNwYXR0ZXJuKSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIvPjwvc3ZnPg==');
    }
    
    .hero-title {
      font-size: 3rem;
      margin-bottom: 1rem;
      position: relative;
      animation: fadeInDown 0.8s ease-out;
    }
    
    .hero-subtitle {
      font-size: 1.5rem;
      opacity: 0.9;
      margin-bottom: 2rem;
      position: relative;
      animation: fadeInUp 0.8s ease-out 0.2s both;
    }
    
    /* Main Content */
    .forum-container {
      max-width: 1200px;
      margin: 3rem auto;
      padding: 0 2rem;
    }
    
    .section-title {
      font-size: 2rem;
      color: var(--primary-dark);
      margin-bottom: 2rem;
      text-align: center;
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      width: 60%;
      height: 4px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      bottom: -10px;
      left: 20%;
      border-radius: 2px;
    }
    
    /* Forum Controls */
    .forum-controls {
      display: flex;
      justify-content: space-between;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }
    
    .search-bar {
      flex-grow: 1;
      max-width: 500px;
      position: relative;
    }
    
    .search-bar input {
      width: 100%;
      padding: 0.8rem 1rem 0.8rem 3rem;
      border: 1px solid var(--gray);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .search-bar input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .search-bar i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
    }
    
    .new-post-btn {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      white-space: nowrap;
    }
    
    .new-post-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
    }
    
    /* Categories */
    .category-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }
    
    .category-tab {
      padding: 0.5rem 1rem;
      background: white;
      border: 1px solid var(--gray);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .category-tab:hover {
      background: var(--primary-light);
      border-color: var(--primary);
    }
    
    .category-tab.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    /* Discussion List */
    .discussions-list {
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }
    
    .discussion-item {
      padding: 1.5rem;
      border-bottom: 1px solid #eee;
      transition: all 0.3s ease;
    }
    
    .discussion-item:hover {
      background: #f8fafc;
    }
    
    .discussion-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .discussion-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
    }
    
    .discussion-title a {
      color: inherit;
      text-decoration: none;
    }
    
    .discussion-title a:hover {
      text-decoration: underline;
    }
    
    .discussion-category {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: var(--primary-light);
      color: var(--primary-dark);
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
      margin-right: 0.5rem;
    }
    
    .discussion-meta {
      display: flex;
      gap: 1rem;
      color: var(--gray);
      font-size: 0.9rem;
    }
    
    .discussion-author {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .author-avatar {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
    }
    
    .discussion-stats {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .stat {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.9rem;
    }
    
    /* Discussion Detail Page Styles */
    .discussion-detail {
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      padding: 2rem;
      margin-bottom: 2rem;
    }
    
    .discussion-content {
      margin-top: 1.5rem;
      line-height: 1.7;
    }
    
    .replies-section {
      margin-top: 3rem;
    }
    
    .replies-list {
      margin-top: 2rem;
    }
    
    .reply-item {
      padding: 1.5rem;
      border-bottom: 1px solid #eee;
      display: flex;
      gap: 1rem;
    }
    
    .reply-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .reply-content {
      flex-grow: 1;
    }
    
    .reply-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .reply-author {
      font-weight: 600;
    }
    
    .reply-date {
      color: var(--gray);
      font-size: 0.9rem;
    }
    
    .reply-text {
      line-height: 1.7;
    }
    
    .reply-form {
      margin-top: 2rem;
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      padding: 2rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid var(--gray);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    textarea.form-control {
      min-height: 150px;
      resize: vertical;
    }
    
    .btn {
      padding: 0.7rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
      border: none;
    }
    
    .btn-primary:hover {
      background: var(--primary-dark);
    }
    
    /* Pagination */
    .pagination {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 2rem;
    }
    
    .page-btn {
      padding: 0.5rem 1rem;
      background: white;
      border: 1px solid var(--gray);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .page-btn:hover {
      background: var(--primary-light);
      border-color: var(--primary);
    }
    
    .page-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    /* New Post Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 12px;
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      animation: fadeIn 0.3s ease-out;
    }
    
    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary-dark);
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--gray);
    }
    
    .modal-body {
      padding: 1.5rem;
    }
    
    .modal-footer {
      padding: 1.5rem;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
    }
    
    .btn-outline {
      background: white;
      border: 1px solid var(--gray);
    }
    
    .btn-outline:hover {
      background: #f8fafc;
    }
    
    /* Footer - Matches Homepage */
    footer {
      background: var(--dark);
      color: white;
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* Animations */
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        padding: 1rem;
      }
      
      .nav-links {
        margin-top: 1rem;
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .hero-title {
        font-size: 2rem;
      }
      
      .hero-subtitle {
        font-size: 1.2rem;
      }
      
      .forum-controls {
        flex-direction: column;
      }
      
      .search-bar {
        max-width: 100%;
      }
      
      .new-post-btn {
        width: 100%;
        justify-content: center;
      }
      
      .modal-content {
        margin: 1rem;
        max-height: 80vh;
      }
      
      .reply-item {
        flex-direction: column;
      }
      
      .reply-avatar {
        margin-bottom: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar - Matches Homepage -->
  <nav class="navbar">
    <div class="nav-logo">
      <i class="fas fa-book-open"></i> EduConnect
    </div>
    <ul class="nav-links">
      <li><a href="homepage.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="careermain.html">Career</a></li>
      <li><a href="notes.html">Notes</a></li>
      <li><a href="forum.html" class="active">Forum</a></li>
      <li><a href="chatboat7.html">Chatbot</a></li>
      <li><a href="collegetime77.html">college Timetable</a></li>
       
    </ul>
  </nav>

  <!-- Hero Section - Matches Homepage -->
  <section class="hero-section">
    <h1 class="hero-title">EduConnect Discussion Forum</h1>
    <p class="hero-subtitle">Connect, collaborate and learn with your peers</p>
  </section>

  <!-- Main Content -->
  <div class="forum-container">
    <!-- Forum Controls -->
    <div class="forum-controls">
      <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search discussions..." id="searchInput">
      </div>
      <button class="new-post-btn" id="newPostBtn">
        <i class="fas fa-plus"></i> New Discussion
      </button>
    </div>

    <!-- Categories -->
    <div class="category-tabs">
      <div class="category-tab active">All Topics</div>
      <div class="category-tab">Academic</div>
      <div class="category-tab">Assignments</div>
      <div class="category-tab">Exams</div>
      <div class="category-tab">Projects</div>
      <div class="category-tab">General</div>
    </div>

    <!-- Discussions List -->
    <h2 class="section-title">Recent Discussions</h2>
    <div class="discussions-list" id="discussionsList">
      <!-- Discussion items will be dynamically inserted here -->
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <button class="page-btn active">1</button>
      <button class="page-btn">2</button>
      <button class="page-btn">3</button>
      <button class="page-btn">Next</button>
    </div>
  </div>

  <!-- New Post Modal -->
  <div class="modal" id="newPostModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Start New Discussion</h3>
        <button class="close-btn" id="closeModalBtn">&times;</button>
      </div>
      <div class="modal-body">
        <form id="newPostForm">
          <div class="form-group">
            <label for="postTitle">Title</label>
            <input type="text" id="postTitle" class="form-control" placeholder="What's your question or topic?" required>
          </div>
          <div class="form-group">
            <label for="postCategory">Category</label>
            <select id="postCategory" class="form-control" required>
              <option value="">Select a category</option>
              <option value="Academic">Academic</option>
              <option value="Assignments">Assignments</option>
              <option value="Exams">Exams</option>
              <option value="Projects">Projects</option>
              <option value="General">General</option>
            </select>
          </div>
          <div class="form-group">
            <label for="postContent">Details</label>
            <textarea id="postContent" class="form-control" placeholder="Provide more details about your discussion..." required></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="cancelPostBtn">Cancel</button>
        <button class="btn btn-primary" id="submitPostBtn">Post Discussion</button>
      </div>
    </div>
  </div>

  <!-- Footer - Matches Homepage -->
  <footer>
    <div class="footer-content">
      <p>&copy; 2025 EduConnect. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Sample data for the forum (in a real app, this would come from a backend)
    let discussions = [
      {
        id: 1,
        title: "How to solve this calculus problem?",
        category: "Academic",
        content: "I'm stuck on problem 3 in chapter 5. Can anyone explain how to approach this?",
        author: "JS",
        date: "2025-05-18T10:30:00",
        replies: [
          {
            id: 1,
            author: "TA",
            content: "You need to apply the chain rule here. Start by differentiating the outer function...",
            date: "2025-05-18T11:45:00"
          },
          {
            id: 2,
            author: "SM",
            content: "I found this video tutorial helpful for similar problems: [link]",
            date: "2025-05-18T12:30:00"
          }
        ],
        views: 42,
        lastReply: "2025-05-18T12:30:00"
      },
      {
        id: 2,
        title: "Best resources for learning Python",
        category: "General",
        content: "Looking for recommendations on good Python tutorials for beginners.",
        author: "AM",
        date: "2025-05-17T08:15:00",
        replies: [
          {
            id: 1,
            author: "RK",
            content: "I highly recommend the Python documentation and W3Schools tutorials.",
            date: "2025-05-17T09:20:00"
          }
        ],
        views: 87,
        lastReply: "2025-05-17T09:20:00"
      },
      {
        id: 3,
        title: "Group project meeting schedule",
        category: "Projects",
        content: "Let's coordinate our availability for the upcoming group project meetings.",
        author: "TP",
        date: "2025-05-16T16:45:00",
        replies: [],
        views: 35,
        lastReply: null
      }
    ];

    // DOM Elements
    const newPostBtn = document.getElementById('newPostBtn');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const cancelPostBtn = document.getElementById('cancelPostBtn');
    const submitPostBtn = document.getElementById('submitPostBtn');
    const newPostModal = document.getElementById('newPostModal');
    const newPostForm = document.getElementById('newPostForm');
    const discussionsList = document.getElementById('discussionsList');
    const searchInput = document.getElementById('searchInput');
    const categoryTabs = document.querySelectorAll('.category-tab');

    // Initialize forum
    document.addEventListener('DOMContentLoaded', () => {
      renderDiscussions(discussions);
      
      // Set up event listeners
      newPostBtn.addEventListener('click', openNewPostModal);
      closeModalBtn.addEventListener('click', closeNewPostModal);
      cancelPostBtn.addEventListener('click', closeNewPostModal);
      submitPostBtn.addEventListener('click', submitNewPost);
      searchInput.addEventListener('input', filterDiscussions);
      
      categoryTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          categoryTabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          filterDiscussions();
        });
      });
    });

    // Render discussions list
    function renderDiscussions(discussionsToRender) {
      discussionsList.innerHTML = '';
      
      if (discussionsToRender.length === 0) {
        discussionsList.innerHTML = `
          <div class="discussion-item" style="text-align: center; padding: 3rem;">
            <i class="fas fa-comment-slash" style="font-size: 2rem; color: var(--gray); margin-bottom: 1rem;"></i>
            <h3>No discussions found</h3>
            <p>Be the first to start a discussion!</p>
          </div>
        `;
        return;
      }
      
      discussionsToRender.forEach(discussion => {
        const discussionElement = document.createElement('div');
        discussionElement.className = 'discussion-item';
        discussionElement.innerHTML = `
          <div class="discussion-header">
            <span class="discussion-category">${discussion.category}</span>
            <span class="discussion-date">${formatDate(discussion.date)}</span>
          </div>
          <h3 class="discussion-title">
            <a href="#" onclick="viewDiscussion(${discussion.id}); return false;">${discussion.title}</a>
          </h3>
          <div class="discussion-meta">
            <div class="discussion-author">
              <span class="author-avatar">${getInitials(discussion.author)}</span>
              <span>${discussion.author}</span>
            </div>
          </div>
          <div class="discussion-stats">
            <div class="stat">
              <i class="fas fa-comment"></i>
              <span>${discussion.replies.length} replies</span>
            </div>
            <div class="stat">
              <i class="fas fa-eye"></i>
              <span>${discussion.views} views</span>
            </div>
            <div class="stat">
              <i class="fas fa-clock"></i>
              <span>${discussion.replies.length > 0 ? 
                `Last reply ${formatRelativeTime(discussion.lastReply)}` : 
                'No replies yet'}</span>
            </div>
          </div>
        `;
        discussionsList.appendChild(discussionElement);
      });
    }

    // View discussion with replies
    function viewDiscussion(discussionId) {
      const discussion = discussions.find(d => d.id === discussionId);
      if (!discussion) return;
      
      // Increment view count
      discussion.views++;
      
      // Create discussion detail view
      discussionsList.innerHTML = `
        <div class="discussion-detail">
          <div class="discussion-header">
            <span class="discussion-category">${discussion.category}</span>
            <span class="discussion-date">${formatDate(discussion.date)}</span>
          </div>
          <h2 class="discussion-title">${discussion.title}</h2>
          <div class="discussion-meta">
            <div class="discussion-author">
              <span class="author-avatar">${getInitials(discussion.author)}</span>
              <span>${discussion.author}</span>
            </div>
          </div>
          <div class="discussion-content">
            <p>${discussion.content}</p>
          </div>
          <div class="discussion-stats">
            <div class="stat">
              <i class="fas fa-comment"></i>
              <span>${discussion.replies.length} replies</span>
            </div>
            <div class="stat">
              <i class="fas fa-eye"></i>
              <span>${discussion.views} views</span>
            </div>
          </div>
        </div>
        
        <div class="replies-section">
          <h3 class="section-title">Replies</h3>
          
          <div class="replies-list" id="repliesList">
            ${discussion.replies.length > 0 ? 
              discussion.replies.map(reply => `
                <div class="reply-item">
                  <div class="reply-avatar">${getInitials(reply.author)}</div>
                  <div class="reply-content">
                    <div class="reply-header">
                      <span class="reply-author">${reply.author}</span>
                      <span class="reply-date">${formatRelativeTime(reply.date)}</span>
                    </div>
                    <div class="reply-text">
                      <p>${reply.content}</p>
                    </div>
                  </div>
                </div>
              `).join('') : 
              `<div class="empty-state" style="text-align: center; padding: 2rem;">
                <i class="fas fa-comment-slash" style="font-size: 2rem; color: var(--gray); margin-bottom: 1rem;"></i>
                <h3>No replies yet</h3>
                <p>Be the first to reply to this discussion!</p>
              </div>`}
          </div>
          
          <div class="reply-form">
            <h4>Post a Reply</h4>
            <form id="replyForm">
              <div class="form-group">
                <textarea id="replyContent" class="form-control" placeholder="Write your reply..." required></textarea>
              </div>
              <button type="button" class="btn btn-primary" onclick="submitReply(${discussionId})">Post Reply</button>
            </form>
          </div>
        </div>
        
        <button class="btn btn-outline" onclick="backToDiscussions()" style="margin-top: 2rem;">
          <i class="fas fa-arrow-left"></i> Back to Discussions
        </button>
      `;
    }

    // Submit a new reply
    function submitReply(discussionId) {
      const replyContent = document.getElementById('replyContent').value;
      if (!replyContent.trim()) {
        alert('Please write your reply before posting');
        return;
      }
      
      const discussion = discussions.find(d => d.id === discussionId);
      if (!discussion) return;
      
      const newReply = {
        id: discussion.replies.length + 1,
        author: "You", // In a real app, this would be the logged in user
        content: replyContent,
        date: new Date().toISOString()
      };
      
      discussion.replies.push(newReply);
      discussion.lastReply = newReply.date;
      
      // Refresh the view
      viewDiscussion(discussionId);
      
      // Scroll to the new reply
      setTimeout(() => {
        const repliesList = document.getElementById('repliesList');
        repliesList.lastElementChild.scrollIntoView({ behavior: 'smooth' });
      }, 100);
    }

    // Back to discussions list
    function backToDiscussions() {
      renderDiscussions(discussions);
    }

    // Filter discussions based on search and category
    function filterDiscussions() {
      const searchTerm = searchInput.value.toLowerCase();
      const activeCategory = document.querySelector('.category-tab.active').textContent;
      
      const filtered = discussions.filter(discussion => {
        const matchesSearch = discussion.title.toLowerCase().includes(searchTerm) || 
                             discussion.content.toLowerCase().includes(searchTerm);
        const matchesCategory = activeCategory === 'All Topics' || discussion.category === activeCategory;
        return matchesSearch && matchesCategory;
      });
      
      renderDiscussions(filtered);
    }

    // New post modal functions
    function openNewPostModal() {
      newPostModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeNewPostModal() {
      newPostModal.style.display = 'none';
      document.body.style.overflow = 'auto';
      newPostForm.reset();
    }

    function submitNewPost() {
      const title = document.getElementById('postTitle').value;
      const category = document.getElementById('postCategory').value;
      const content = document.getElementById('postContent').value;
      
      if (!title || !category || !content) {
        alert('Please fill in all fields');
        return;
      }
      
      // Create new discussion
      const newDiscussion = {
        id: discussions.length + 1,
        title,
        category,
        content,
        author: "You", // This would be the logged in user
        date: new Date().toISOString(),
        replies: [],
        views: 0,
        lastReply: null
      };
      
      discussions.unshift(newDiscussion);
      renderDiscussions(discussions);
      closeNewPostModal();
    }

    // Helper functions
    function formatDate(dateString) {
      const options = { year: 'numeric', month: 'short', day: 'numeric' };
      return new Date(dateString).toLocaleDateString(undefined, options);
    }

    function formatRelativeTime(dateString) {
      if (!dateString) return '';
      const now = new Date();
      const date = new Date(dateString);
      const diffInSeconds = Math.floor((now - date) / 1000);
      
      if (diffInSeconds < 60) return 'just now';
      if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;
      if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;
      return `${Math.floor(diffInSeconds / 86400)} days ago`;
    }

    function getInitials(name) {
      return name.split(' ').map(part => part[0]).join('');
    }
  </script>
</body>
</html>